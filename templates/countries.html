{% extends "base.html" %}

{% block title %}Countries - Ledger System{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Countries</h2>
    <a href="{{ url_for('add_country') }}" class="btn btn-primary">Add New Country</a>
</div>

{% if countries %}
<!-- Desktop Table View -->
<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>S.No</th>
                <th>ID</th>
                <th>Country Name</th>
                <th>Continent</th>
                <th>Price</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for country in countries %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ country.id }}</td>
                <td>
                    {% if edit_id == country.id %}
                        <form method="POST" action="{{ url_for('edit_country', country_id=country.id) }}" style="display:grid; grid-template-columns: 1fr 1fr 1fr auto auto; gap:6px; align-items:center;">
                            <input type="text" name="name" value="{{ country.name }}" required>
                            <select name="continent" required>
                                <option value="">Select continent</option>
                                <option value="Africa" {% if country.continent == 'Africa' %}selected{% endif %}>Africa</option>
                                <option value="Asia" {% if country.continent == 'Asia' %}selected{% endif %}>Asia</option>
                                <option value="Europe" {% if country.continent == 'Europe' %}selected{% endif %}>Europe</option>
                                <option value="North America" {% if country.continent == 'North America' %}selected{% endif %}>North America</option>
                                <option value="South America" {% if country.continent == 'South America' %}selected{% endif %}>South America</option>
                                <option value="Oceania" {% if country.continent == 'Oceania' %}selected{% endif %}>Oceania</option>
                                <option value="Antarctica" {% if country.continent == 'Antarctica' %}selected{% endif %}>Antarctica</option>
                            </select>
                            <input type="number" step="0.01" name="price" value="{{ country.price }}" required>
                            <button type="submit" class="btn btn-primary btn-sm">Save</button>
                            <a href="{{ url_for('countries') }}" class="btn btn-secondary btn-sm">Cancel</a>
                        </form>
                    {% else %}
                        {{ country.name }}
                    {% endif %}
                </td>
                <td>{{ country.continent or 'Unknown' }}</td>
                <td>{{ country.price|comma2 }}</td>
                <td>
                    {% if edit_id != country.id %}
                    <a href="{{ url_for('countries', edit_id=country.id) }}" class="btn btn-secondary btn-sm">Edit</a>
                    {% endif %}
                    <form action="{{ url_for('delete_country', country_id=country.id) }}" 
                          method="POST" 
                          style="display: inline;"
                          onsubmit="return confirm('Are you sure you want to delete this country?');">
                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Mobile Card View -->
<div class="mobile-card-view">
    {% for country in countries %}
    <div class="mobile-card">
        <div class="mobile-card-header">#{{ loop.index }} - {{ country.name }}</div>
        <div class="mobile-card-row">
            <span class="mobile-card-label">ID:</span>
            <span class="mobile-card-value">#{{ country.id }}</span>
        </div>
        <div class="mobile-card-row">
            <span class="mobile-card-label">Continent:</span>
            <span class="mobile-card-value">{{ country.continent or 'Unknown' }}</span>
        </div>
        <div class="mobile-card-row">
            <span class="mobile-card-label">Price:</span>
            <span class="mobile-card-value">{{ country.price|comma2 }}</span>
        </div>
        <div class="mobile-card-actions">
            <a href="{{ url_for('edit_country', country_id=country.id) }}" class="btn btn-secondary btn-sm">Edit</a>
            <form action="{{ url_for('delete_country', country_id=country.id) }}" 
                  method="POST" 
                  style="display: inline; flex: 1;"
                  onsubmit="return confirm('Are you sure you want to delete this country?');">
                <button type="submit" class="btn btn-danger btn-sm" style="width: 100%;">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p class="empty-state">No countries yet. <a href="{{ url_for('add_country') }}">Add your first country</a></p>
{% endif %}
{% endblock %}

